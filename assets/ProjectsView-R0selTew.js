import{_ as $,o as l,c as n,a as e,t as o,b,d as N,w as y,v as I,e as S,f as L,F as D,r as T,g as d,h as M,u as U,i as C,n as z,j as F}from"./index-C330P9fm.js";import{u as q}from"./propertyStore-Dxu2LSJ7.js";const A={key:0,class:"confirm-dialog-overlay"},E={class:"confirm-dialog"},Q={class:"dialog-header"},R={class:"dialog-body"},G={class:"dialog-actions"},H={__name:"ConfirmDialog",props:{title:{type:String,default:"确认操作"},message:{type:String,default:"确定要执行此操作吗？"},confirmText:{type:String,default:"确定"},cancelText:{type:String,default:"取消"},visible:{type:Boolean,required:!0}},emits:["confirm","cancel"],setup(r,{emit:h}){const i=h,f=()=>{i("confirm")},u=()=>{i("cancel")};return(v,m)=>r.visible?(l(),n("div",A,[e("div",E,[e("div",Q,[e("h3",null,o(r.title),1)]),e("div",R,[e("p",null,o(r.message),1)]),e("div",G,[e("button",{onClick:u,class:"btn-cancel"},o(r.cancelText),1),e("button",{onClick:f,class:"btn-confirm"},o(r.confirmText),1)])])])):b("",!0)}},J=$(H,[["__scopeId","data-v-5325a994"]]),K={class:"properties-view"},O={class:"page-header"},W={class:"controls"},X={class:"properties-grid"},Y={class:"card-header"},Z={class:"city-badge"},j={class:"card-body"},ee={key:0,class:"tags"},te={class:"card-footer"},se={class:"card-actions"},oe=["onClick"],le=["onClick"],ae={class:"card-meta"},ne={key:0,class:"empty-state"},ie={__name:"ProjectsView",emits:["delete"],setup(r,{emit:h}){const i=q(),f=U(),u=d(""),v=d(""),m=d(""),k=M(()=>i.properties.filter(a=>{const t=u.value===""||a.name.toLowerCase().includes(u.value.toLowerCase()),s=v.value===""||a.city===v.value,c=m.value===""||a.status===m.value;return t&&s&&c}));function V(a){f.push(`/edit/${a.id}`)}const g=d(!1),p=d(null),_=d(""),w=(a,t)=>{p.value=a,_.value=t||"此项目",g.value=!0},x=()=>{g.value=!1,p.value=null,_.value=""},P=()=>{console.log("id:"+p.value),p.value&&i.deleteProject(p.value),x()};function B(){f.push("/add")}return N(()=>{console.log("ProjectsView mounted, loading properties from localStorage..."),i.fetchProperties(),console.log("Loaded properties:",i.properties)}),(a,t)=>(l(),n("div",K,[e("div",O,[t[5]||(t[5]=e("h2",null,"项目管理",-1)),e("div",W,[y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),placeholder:"搜索项目名称...",class:"search-input"},null,512),[[I,u.value]]),y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),class:"filter-select"},[...t[3]||(t[3]=[e("option",{value:""},"所有城市",-1),e("option",{value:"珠海"},"珠海",-1),e("option",{value:"中山"},"中山",-1)])],512),[[S,v.value]]),y(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>m.value=s),class:"filter-select"},[...t[4]||(t[4]=[L('<option value="" data-v-b39f2b51>所有状态</option><option value="待跟进" data-v-b39f2b51>待跟进</option><option value="跟进中" data-v-b39f2b51>跟进中</option><option value="已推荐" data-v-b39f2b51>已推荐</option><option value="已成交" data-v-b39f2b51>已成交</option>',5)])],512),[[S,m.value]])])]),e("div",X,[(l(!0),n(D,null,T(k.value,s=>(l(),n("div",{key:s.id,class:"project-card"},[e("div",Y,[e("h3",null,o(s.name),1),e("span",Z,o(s.city),1)]),e("div",j,[e("p",null,[t[6]||(t[6]=e("strong",null,"规模:",-1)),C(" "+o(s.size),1)]),e("p",null,[t[7]||(t[7]=e("strong",null,"价格:",-1)),C(" "+o(s.price),1)]),e("p",null,[t[8]||(t[8]=e("strong",null,"联系人:",-1)),C(" "+o(s.contact),1)]),e("p",null,[t[9]||(t[9]=e("strong",null,"状态:",-1)),e("span",{class:z(`status-badge status-${s.status}`)},o(s.status),3)]),s.tags.length>0?(l(),n("div",ee,[(l(!0),n(D,null,T(s.tags,c=>(l(),n("span",{key:c,class:"tag"},o(c),1))),128))])):b("",!0)]),e("div",te,[e("div",se,[e("button",{onClick:c=>V(s),class:"btn-edit"},"编辑",8,oe),e("button",{onClick:c=>w(s.id,s.name),class:"btn-delete"}," 删除 ",8,le),g.value?(l(),F(J,{key:0,title:"删除确认",message:`确定要删除 '${_.value}' 吗？此操作不可撤销。`,confirmText:"删除",cancelText:"取消",visible:g.value,onConfirm:P,onCancel:x},null,8,["message","visible"])):b("",!0)]),e("div",ae,[e("small",null,"ID: "+o(s.id),1)])])]))),128))]),k.value.length===0?(l(),n("div",ne,[t[10]||(t[10]=e("p",null,"暂无项目数据，请添加新项目。",-1)),e("button",{onClick:B,class:"btn-primary"},"添加第一个项目")])):b("",!0)]))}},ce=$(ie,[["__scopeId","data-v-b39f2b51"]]);export{ce as default};
