import{_ as q,u as B,d as M,c as o,a as t,t as v,j as m,w as i,v as f,n as V,b as g,e as x,f as S,F as T,r as D,l as N,m as h,h as z,g as u,i as A,o as l}from"./index-EUuC8mmV.js";const C={class:"form-view"},E={class:"page-header"},R={class:"form-row"},L={class:"form-group"},O={key:0,class:"error-message"},G={class:"form-group"},H={key:0,class:"error-message"},J={class:"form-row"},K={class:"form-group"},Q={class:"form-group"},W={class:"form-row"},X={class:"form-group"},Y={class:"form-group"},Z={key:0,class:"error-message"},$={class:"form-group"},ee={class:"form-group"},te={key:0,class:"tag-preview"},se={class:"form-actions"},ae=["disabled"],oe=["disabled"],le={key:0,class:"loading-text"},re={key:1},ie={key:0,class:"success-message"},ne={__name:"ProjectFormView",setup(ue){const d=h(),b=A(),_=B(),p=z(()=>d.name==="edit"),n=u(!1),c=u(!1),j=u(!1),k=u(""),s=u({name:"",city:"",size:"",price:"",contact:"",status:"å¾…è·Ÿè¿›",source:"æ‰‹åŠ¨æ·»åŠ "}),y=u(""),w=z(()=>y.value.split(",").map(r=>r.trim()).filter(r=>r!==""));M(()=>{console.log("id:"+d.params.id),p.value&&d.params.id&&F()});const F=()=>{const r=parseInt(d.params.id),e=_.getProjectById(r);e?(s.value={name:e.name||"",city:e.city||"",size:e.size||"",price:e.price||"",contact:e.contact||"",status:e.status||"å¾…è·Ÿè¿›",source:e.source||"æ‰‹åŠ¨æ·»åŠ "},e.tags&&Array.isArray(e.tags)&&(y.value=e.tags.join(", "))):(alert("æ‰¾ä¸åˆ°æŒ‡å®šçš„é¡¹ç›®"),b.push("/projects"))},I=()=>(n.value=!0,s.value.name.trim()?s.value.city?s.value.status?s.value.name.length>100?"é¡¹ç›®åç§°ä¸èƒ½è¶…è¿‡100ä¸ªå­—ç¬¦":null:"è¯·é€‰æ‹©é¡¹ç›®çŠ¶æ€":"è¯·é€‰æ‹©æ‰€åœ¨åŸå¸‚":"é¡¹ç›®åç§°ä¸èƒ½ä¸ºç©º"),P=async()=>{const r=I();if(r){alert(r);return}c.value=!0;try{await new Promise(a=>setTimeout(a,500));const e={...s.value,tags:w.value,updatedAt:new Date().toISOString().split("T")[0]};if(p.value){const a=parseInt(d.params.id);_.updateProject(a,e),k.value="é¡¹ç›®æ›´æ–°æˆåŠŸï¼"}else _.addProject(e),k.value="é¡¹ç›®æ·»åŠ æˆåŠŸï¼";j.value=!0,setTimeout(()=>{j.value=!1,b.push("/projects")},1500)}catch(e){console.error("æ“ä½œå¤±è´¥:",e),alert("æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{c.value=!1}},U=()=>{confirm("ç¡®å®šè¦å–æ¶ˆå—ï¼Ÿæœªä¿å­˜çš„æ•°æ®å°†ä¼šä¸¢å¤±ã€‚")&&b.push("/projects")};return(r,e)=>(l(),o("div",C,[t("div",E,[t("h2",null,v(p.value?"ç¼–è¾‘é¡¹ç›®":"æ·»åŠ æ–°é¡¹ç›®"),1),t("p",null,v(p.value?"ä¿®æ”¹é¡¹ç›®ä¿¡æ¯":"å¡«å†™é¡¹ç›®è¯¦ç»†ä¿¡æ¯"),1)]),t("form",{onSubmit:N(P,["prevent"]),class:"project-form"},[t("div",R,[t("div",L,[e[8]||(e[8]=t("label",{for:"name"},[m(" é¡¹ç›®åç§° "),t("span",{class:"required-mark"},"*")],-1)),i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.name=a),id:"name",type:"text",placeholder:"ä¾‹å¦‚ï¼šç››ä¸œÂ·æ±Ÿå±±èµ‹",required:"",class:V(["form-input",{"input-error":!s.value.name&&n.value}])},null,2),[[f,s.value.name]]),!s.value.name&&n.value?(l(),o("div",O,"é¡¹ç›®åç§°ä¸èƒ½ä¸ºç©º")):g("",!0)]),t("div",G,[e[10]||(e[10]=t("label",{for:"city"},[m(" æ‰€åœ¨åŸå¸‚ "),t("span",{class:"required-mark"},"*")],-1)),i(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.city=a),id:"city",required:"",class:V(["form-select",{"input-error":!s.value.city&&n.value}])},[...e[9]||(e[9]=[S('<option value="" disabled data-v-7a2f574c>è¯·é€‰æ‹©åŸå¸‚</option><option value="ç æµ·" data-v-7a2f574c>ç æµ·</option><option value="ä¸­å±±" data-v-7a2f574c>ä¸­å±±</option><option value="å¹¿å·" data-v-7a2f574c>å¹¿å·</option><option value="æ·±åœ³" data-v-7a2f574c>æ·±åœ³</option>',5)])],2),[[x,s.value.city]]),!s.value.city&&n.value?(l(),o("div",H,"è¯·é€‰æ‹©æ‰€åœ¨åŸå¸‚")):g("",!0)])]),t("div",J,[t("div",K,[e[11]||(e[11]=t("label",{for:"size"},"æˆ·å‹/è§„æ¨¡",-1)),i(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.size=a),id:"size",type:"text",placeholder:"ä¾‹å¦‚ï¼šçº¦155-325ã¡",class:"form-input"},null,512),[[f,s.value.size]])]),t("div",Q,[e[12]||(e[12]=t("label",{for:"price"},"ä»·æ ¼å‚è€ƒ",-1)),i(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>s.value.price=a),id:"price",type:"text",placeholder:"ä¾‹å¦‚ï¼š65ä¸‡èµ·",class:"form-input"},null,512),[[f,s.value.price]])])]),t("div",W,[t("div",X,[e[13]||(e[13]=t("label",{for:"contact"},"è”ç³»äºº",-1)),i(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>s.value.contact=a),id:"contact",type:"text",placeholder:"ä¾‹å¦‚ï¼šFBB å§šæ³½ç’‡",class:"form-input"},null,512),[[f,s.value.contact]])]),t("div",Y,[e[15]||(e[15]=t("label",{for:"status"},[m(" é¡¹ç›®çŠ¶æ€ "),t("span",{class:"required-mark"},"*")],-1)),i(t("select",{"onUpdate:modelValue":e[5]||(e[5]=a=>s.value.status=a),id:"status",required:"",class:V(["form-select",{"input-error":!s.value.status&&n.value}])},[...e[14]||(e[14]=[S('<option value="" disabled data-v-7a2f574c>è¯·é€‰æ‹©çŠ¶æ€</option><option value="å¾…è·Ÿè¿›" data-v-7a2f574c>å¾…è·Ÿè¿›</option><option value="è·Ÿè¿›ä¸­" data-v-7a2f574c>è·Ÿè¿›ä¸­</option><option value="å·²æ¨è" data-v-7a2f574c>å·²æ¨è</option><option value="å·²æˆäº¤" data-v-7a2f574c>å·²æˆäº¤</option>',5)])],2),[[x,s.value.status]]),!s.value.status&&n.value?(l(),o("div",Z,"è¯·é€‰æ‹©é¡¹ç›®çŠ¶æ€")):g("",!0)])]),t("div",$,[e[17]||(e[17]=t("label",{for:"source"},"ä¿¡æ¯æ¥æº",-1)),i(t("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>s.value.source=a),id:"source",class:"form-select"},[...e[16]||(e[16]=[S('<option value="" data-v-7a2f574c>è¯·é€‰æ‹©æ¥æº</option><option value="æ¥¼ç›˜èµ„æ–™" data-v-7a2f574c>æ¥¼ç›˜èµ„æ–™</option><option value="èŠå¤©è®°å½•" data-v-7a2f574c>èŠå¤©è®°å½•</option><option value="æ”¶è—ä¿¡æ¯" data-v-7a2f574c>æ”¶è—ä¿¡æ¯</option><option value="æ‰‹åŠ¨æ·»åŠ " data-v-7a2f574c>æ‰‹åŠ¨æ·»åŠ </option>',5)])],512),[[x,s.value.source]])]),t("div",ee,[e[18]||(e[18]=t("label",{for:"tags"},[m(" æ ¸å¿ƒå–ç‚¹æ ‡ç­¾ "),t("small",{class:"hint-text"},"ï¼ˆç”¨é€—å·åˆ†éš”å¤šä¸ªæ ‡ç­¾ï¼‰")],-1)),i(t("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>y.value=a),id:"tags",type:"text",placeholder:"ä¾‹å¦‚ï¼šæµ·æ™¯æˆ¿, å­¦åŒºæˆ¿, åœ°é“å£, ä½å¯†åº¦",class:"form-input"},null,512),[[f,y.value]]),w.value.length>0?(l(),o("div",te,[(l(!0),o(T,null,D(w.value,a=>(l(),o("span",{key:a,class:"tag"},v(a),1))),128))])):g("",!0)]),t("div",se,[t("button",{type:"button",class:"btn-secondary",onClick:U,disabled:c.value}," å–æ¶ˆ ",8,ae),t("button",{type:"submit",class:"btn-primary",disabled:c.value},[c.value?(l(),o("span",le,[...e[19]||(e[19]=[t("span",{class:"spinner"},null,-1),m(" å¤„ç†ä¸­... ",-1)])])):(l(),o("span",re,v(p.value?"ğŸ’¾ æ›´æ–°é¡¹ç›®":"â• æ·»åŠ é¡¹ç›®"),1))],8,oe)])],32),j.value?(l(),o("div",ie,"âœ… "+v(k.value),1)):g("",!0)]))}},pe=q(ne,[["__scopeId","data-v-7a2f574c"]]);export{pe as default};
